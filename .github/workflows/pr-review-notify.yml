- name: Send Discord Notification
  env:
    DISCORD_WEBHOOK_URL: ${{ secrets.DISCORD_WEBHOOK_URL }}
    MENTIONS: ${{ steps.map-reviewers.outputs.mentions }}
    PR_URL: ${{ github.event.pull_request.html_url }}
    PR_TITLE: ${{ github.event.pull_request.title }}
  run: |
    curl -X POST "$DISCORD_WEBHOOK_URL" \
      -H "Content-Type: application/json" \
      -d '{
        "content": "'"$MENTIONS"'",
        "embeds": [
          {
            "title": "📘 '"${PR_TITLE}"'",
            "url": "'"${PR_URL}"'",
            "description": "Pull Request 리뷰어로 지정되었습니다.",
            "timestamp": "'"$(date -u +"%Y-%m-%dT%H:%M:%SZ")"'"
          }
        ],
        "allowed_mentions": { "parse": ["users"] }
      }'
